<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NEO FRAME EDITOR</title>
    <style>
        :root {
            --neon-blue: #00f0ff;
            --neon-yellow: #fff000;
            --dark-bg: #0a0a12;
            --darker-bg: #050508;
            --blue-glow: 0 0 10px var(--neon-blue);
            --yellow-glow: 0 0 10px var(--neon-yellow);
        }
        
        body {
            font-family: 'Courier New', monospace;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            text-align: center;
            background-color: var(--dark-bg);
            color: var(--neon-blue);
        }
        
        h1 {
            color: var(--neon-yellow);
            text-shadow: var(--yellow-glow);
            letter-spacing: 2px;
        }
        
        h3 {
            color: var(--neon-blue);
            text-shadow: var(--blue-glow);
        }
        
        .container {
            background-color: var(--darker-bg);
            padding: 20px;
            border-radius: 5px;
            border: 1px solid var(--neon-blue);
            box-shadow: var(--blue-glow);
            margin-bottom: 20px;
            position: relative;
        }
        
        .frame-container {
            position: relative;
            width: 500px;
            height: 500px;
            margin: 20px auto;
            border: 1px dashed var(--neon-blue);
            overflow: hidden;
        }
        
        #background-image {
            position: absolute;
            max-width: 100%;
            max-height: 100%;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            cursor: move;
            filter: brightness(100%) contrast(100%) saturate(100%);
        }
        
        #frame-image {
            position: absolute;
            width: 100%;
            height: 100%;
            top: 0;
            left: 0;
            z-index: 2;
            pointer-events: none;
            transform-origin: center;
        }
        
        .controls {
            margin: 20px 0;
            padding: 15px;
            border: 1px solid var(--neon-blue);
            border-radius: 5px;
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
        }
        
        .control-group {
            margin-bottom: 10px;
            text-align: left;
        }
        
        button {
            background-color: var(--darker-bg);
            color: var(--neon-blue);
            border: 1px solid var(--neon-blue);
            padding: 10px 20px;
            font-family: 'Courier New', monospace;
            font-size: 16px;
            margin: 4px 2px;
            cursor: pointer;
            border-radius: 5px;
            transition: all 0.3s;
            text-shadow: var(--blue-glow);
            grid-column: span 2;
        }
        
        button:hover {
            background-color: var(--neon-blue);
            color: var(--dark-bg);
            box-shadow: var(--blue-glow);
        }
        
        .premium-btn {
            background-color: var(--neon-yellow);
            color: #000;
            border: 1px solid var(--neon-yellow);
            text-shadow: none;
        }
        
        .premium-btn:hover {
            background-color: #ff0;
            box-shadow: var(--yellow-glow);
        }
        
        .download-btn {
            background-color: #0055ff;
            color: white;
        }
        
        .download-btn:hover {
            background-color: #0077ff;
        }
        
        select, input {
            padding: 8px;
            margin: 5px;
            border-radius: 5px;
            border: 1px solid var(--neon-blue);
            background-color: var(--darker-bg);
            color: var(--neon-blue);
            font-family: 'Courier New', monospace;
            width: 100%;
        }
        
        input[type="range"] {
            -webkit-appearance: none;
            height: 5px;
            background: var(--darker-bg);
            border: 1px solid var(--neon-blue);
        }
        
        input[type="range"]::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 15px;
            height: 15px;
            background: var(--neon-blue);
            cursor: pointer;
            box-shadow: var(--blue-glow);
        }
        
        /* Modal styles */
        .modal {
            display: none;
            position: fixed;
            z-index: 100;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.8);
        }
        
        .modal-content {
            background-color: var(--darker-bg);
            margin: 15% auto;
            padding: 20px;
            border: 1px solid var(--neon-yellow);
            width: 80%;
            max-width: 500px;
            border-radius: 5px;
            box-shadow: var(--yellow-glow);
        }
        
        .close {
            color: var(--neon-blue);
            float: right;
            font-size: 28px;
            font-weight: bold;
            cursor: pointer;
        }
        
        .close:hover {
            color: var(--neon-yellow);
        }
        
        /* Typewriter effect for title */
        .typewriter h1 {
            overflow: hidden;
            border-right: .15em solid var(--neon-yellow);
            white-space: nowrap;
            margin: 0 auto;
            letter-spacing: .15em;
            animation: 
                typing 3.5s steps(40, end),
                blink-caret .75s step-end infinite;
        }
        
        @keyframes typing {
            from { width: 0 }
            to { width: 100% }
        }
        
        @keyframes blink-caret {
            from, to { border-color: transparent }
            50% { border-color: var(--neon-yellow); }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="typewriter">
            <h1>NEO FRAME EDITOR</h1>
        </div>
        
        <div class="controls">
            <div class="control-group">
                <h3>FRAME SELECTION</h3>
                <select id="frame-selector">
                    <option value="https://i.imgur.com/TmE5lv1.png">Matrix Code</option>
                    <option value="https://i.imgur.com/9A9A9A9.png">Circuit Board</option>
                    <option value="https://i.imgur.com/7B7B7B7.png">Hacker Terminal</option>
                    <option value="https://i.imgur.com/6C6C6C6.png">Binary Rain</option>
                </select>
            </div>
            
            <div class="control-group">
                <h3>UPLOAD PHOTO</h3>
                <input type="file" id="photo-upload" accept="image/*">
            </div>
            
            <div class="control-group">
                <h3>PHOTO CONTROLS</h3>
                <label>ZOOM: <input type="range" id="zoom-control" min="50" max="200" value="100"></label>
                <label>ROTATE: <input type="range" id="rotate-control" min="0" max="360" value="0"></label>
                <label>BRIGHTNESS: <input type="range" id="brightness-control" min="0" max="200" value="100"></label>
                <label>CONTRAST: <input type="range" id="contrast-control" min="0" max="200" value="100"></label>
                <label>SATURATION: <input type="range" id="saturation-control" min="0" max="200" value="100"></label>
            </div>
            
            <div class="control-group">
                <h3>FRAME CONTROLS</h3>
                <label>FRAME SCALE: <input type="range" id="frame-scale" min="80" max="120" value="100"></label>
            </div>
            
            <button id="center-btn">CENTER PHOTO</button>
            <button class="download-btn" id="download-btn">DOWNLOAD FRAMED PHOTO</button>
            <button class="premium-btn" id="premium-btn">GET PREMIUM (₱20)</button>
        </div>
        
        <div class="frame-container" id="export-area">
            <img id="background-image" style="display: none;">
            <img id="frame-image" src="">
        </div>
    </div>

    <!-- Premium Modal -->
    <div id="premium-modal" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <h2 style="color: var(--neon-yellow); text-shadow: var(--yellow-glow);">UPGRADE TO PREMIUM</h2>
            <p>For only <strong>₱20</strong>, you can:</p>
            <ul>
                <li>Remove watermark from your photos</li>
                <li>Access exclusive premium frames</li>
                <li>Get priority support</li>
            </ul>
            <p>Message me on Facebook to upgrade:</p>
            <a href="https://www.facebook.com/jurex.aso" target="_blank" style="color: var(--neon-blue); text-decoration: none; font-weight: bold;">
                CLICK HERE TO MESSAGE ME
            </a>
            <p style="margin-top: 20px;">After payment, send me your email to activate premium features!</p>
        </div>
    </div>

    <script>
        // Elements
        const frameSelector = document.getElementById('frame-selector');
        const photoUpload = document.getElementById('photo-upload');
        const backgroundImage = document.getElementById('background-image');
        const frameImage = document.getElementById('frame-image');
        const exportArea = document.getElementById('export-area');
        
        // Photo Controls
        const zoomControl = document.getElementById('zoom-control');
        const rotateControl = document.getElementById('rotate-control');
        const brightnessControl = document.getElementById('brightness-control');
        const contrastControl = document.getElementById('contrast-control');
        const saturationControl = document.getElementById('saturation-control');
        
        // Frame Controls
        const frameScale = document.getElementById('frame-scale');
        
        // Buttons
        const centerBtn = document.getElementById('center-btn');
        const downloadBtn = document.getElementById('download-btn');
        const premiumBtn = document.getElementById('premium-btn');
        
        // Modal elements
        const modal = document.getElementById('premium-modal');
        const span = document.getElementsByClassName('close')[0];

        // Current state
        let currentScale = 1;
        let currentRotate = 0;
        let offsetX = 0;
        let offsetY = 0;
        let isDragging = false;
        let startX, startY;
        let isPremium = false;

        // Initialize with first frame
        updateFrame();

        // Event listeners
        frameSelector.addEventListener('change', updateFrame);
        photoUpload.addEventListener('change', handlePhotoUpload);
        
        // Photo adjustments
        zoomControl.addEventListener('input', updatePhoto);
        rotateControl.addEventListener('input', updatePhoto);
        brightnessControl.addEventListener('input', updatePhoto);
        contrastControl.addEventListener('input', updatePhoto);
        saturationControl.addEventListener('input', updatePhoto);
        
        // Frame adjustments
        frameScale.addEventListener('input', updateFrameScale);
        
        centerBtn.addEventListener('click', centerPhoto);
        downloadBtn.addEventListener('click', downloadFramedPhoto);
        premiumBtn.addEventListener('click', () => modal.style.display = 'block');
        
        // Modal close
        span.addEventListener('click', () => modal.style.display = 'none');
        window.addEventListener('click', (event) => {
            if (event.target == modal) {
                modal.style.display = 'none';
            }
        });

        // Make the photo draggable
        backgroundImage.addEventListener('mousedown', startDrag);
        document.addEventListener('mousemove', drag);
        document.addEventListener('mouseup', endDrag);

        function updateFrame() {
            const selectedFrame = frameSelector.value;
            frameImage.src = selectedFrame;
        }

        function handlePhotoUpload(e) {
            const file = e.target.files[0];
            if (file) {
                const reader = new FileReader();
                reader.onload = function(event) {
                    backgroundImage.src = event.target.result;
                    backgroundImage.style.display = 'block';
                    centerPhoto();
                };
                reader.readAsDataURL(file);
            }
        }

        function updatePhoto() {
            currentScale = zoomControl.value / 100;
            currentRotate = rotateControl.value;
            
            backgroundImage.style.filter = `
                brightness(${brightnessControl.value}%) 
                contrast(${contrastControl.value}%) 
                saturate(${saturationControl.value}%)
            `;
            
            applyTransform();
        }

        function updateFrameScale() {
            const scale = frameScale.value / 100;
            frameImage.style.transform = `scale(${scale})`;
        }

        function centerPhoto() {
            offsetX = 0;
            offsetY = 0;
            applyTransform();
        }

        function applyTransform() {
            backgroundImage.style.transform = `
                translate(-50%, -50%) 
                scale(${currentScale}) 
                rotate(${currentRotate}deg)
                translate(${offsetX}px, ${offsetY}px)
            `;
        }

        function startDrag(e) {
            isDragging = true;
            startX = e.clientX - offsetX;
            startY = e.clientY - offsetY;
            backgroundImage.style.cursor = 'grabbing';
        }

        function drag(e) {
            if (!isDragging) return;
            e.preventDefault();
            offsetX = e.clientX - startX;
            offsetY = e.clientY - startY;
            applyTransform();
        }

        function endDrag() {
            isDragging = false;
            backgroundImage.style.cursor = 'grab';
        }

        function downloadFramedPhoto() {
            if (!backgroundImage.src || backgroundImage.src === '#') {
                alert('PLEASE UPLOAD A PHOTO FIRST');
                return;
            }

            // Use html2canvas to capture exactly what's visible
            html2canvas(exportArea, {
                backgroundColor: null,
                scale: 2 // Higher quality
            }).then(canvas => {
                // Add watermark to the canvas
                const ctx = canvas.getContext('2d');
                
                if (!isPremium) {
                    // Watermark settings
                    ctx.font = 'bold 40px Courier New';
                    ctx.fillStyle = 'rgba(255, 240, 0, 0.7)';
                    ctx.textAlign = 'right';
                    ctx.textBaseline = 'bottom';
                    ctx.shadowColor = '#fff000';
                    ctx.shadowBlur = 10;
                    
                    // Add watermark text
                    ctx.fillText('REX PH', canvas.width - 20, canvas.height - 20);
                }

                // Trigger download
                const link = document.createElement('a');
                link.download = 'neo-framed-photo.png';
                link.href = canvas.toDataURL('image/png');
                link.click();
            });
        }
    </script>
    <!-- Add html2canvas library for perfect screenshot export -->
    <script src="https://html2canvas.hertzen.com/dist/html2canvas.min.js"></script>
</body>
</html>